{"ast":null,"code":"import _objectSpread from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melodyvsl/Documents/GitHub/movie_react_app/src/component/movies.jsx\";\nimport React, { Component } from 'react';\nimport Pagination from './common/pagination';\nimport MoviesTable from './moviesTable';\nimport { Link } from 'react-router-dom';\nimport ListGroup from './common/listGroup';\nimport { getGenres } from '../servises/fakeGenreService';\nimport { paginate } from '../utils/paginate';\nimport { getMovies } from '../servises/fakeMovieService';\nimport _ from 'lodash'; //baraye sorting kardan//library baraye kar ba arayeha\n\nvar Movies =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Movies, _Component);\n\n  function Movies() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Movies);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Movies)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      genres: [],\n      currentPage: 1,\n      pageSize: 4,\n      sortColumn: {\n        path: 'title',\n        order: 'asc'\n      }\n    };\n\n    _this.handleDelete = function (movie) {\n      var movies = _this.state.movies.filter(function (m) {\n        return m._id !== movie._id;\n      });\n\n      _this.setState({\n        movies: movies\n      });\n    };\n\n    _this.handleLike = function (movie) {\n      var movies = _toConsumableArray(_this.state.movies);\n\n      var index = movies.indexOf(movie);\n      movies[index] = _objectSpread({}, movies[index]);\n      movies[index].liked = !movies[index].liked;\n\n      _this.setState({\n        movies: movies\n      });\n    };\n\n    _this.handlePageChange = function (page) {\n      _this.setState({\n        currentPage: page\n      });\n    };\n\n    _this.handleGenreSelect = function (genre) {\n      _this.setState({\n        selectedGenre: genre,\n        currentPage: 1\n      }); //inja baraye inke age allgenre ro bezanim va safehate mokhtalefesho baraye genraye mokhtalef hamsafeye dovom neshon mide ke khalie baraye hamin baraye baghie genra bayad bargardim be safeye aval ta neshon bede 3 ta filmesho\n\n    };\n\n    _this.handleSort = function (sortColumn) {\n      _this.setState({\n        sortColumn: sortColumn\n      }); //avalesh faghat in bood  sortColumn: { path, order: 'asc'\n\n    };\n\n    _this.getPageData = function () {\n      var _this$state = _this.state,\n          pageSize = _this$state.pageSize,\n          currentPage = _this$state.currentPage,\n          selectedGenre = _this$state.selectedGenre,\n          allMovies = _this$state.movies,\n          sortColumn = _this$state.sortColumn;\n      var filtered = selectedGenre && selectedGenre._id // inja ino neveshtim chon baraye allgenre id nadarim pas inja tarifesh kardim ke age id ha ham barabar nabod all movie ro be ma bede...age barabar bod filter kone\n      ? allMovies.filter(function (m) {\n        return m.genre._id == selectedGenre._id;\n      }) : allMovies; // if selectedItem truthy filter kon oon filmai ke idishon ba idie selected item yekie dar gheyre in sorat kole fimlaro neshon bede\n\n      var sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]); //mige filtero begir bar asase titlesh ke dar path tarif shode be shekle asc orderesh kon\n\n\n      var movies = paginate(sorted, currentPage, pageSize); // inja ham ye arraye jadid sakhtim ke etelaatesh paginate shode beshe va az fni ke dar paginate.js hast estefade kardim barash va dar bakhshaye dge ham in movies ro be onvane array estefade kardim\n\n      return {\n        totalCount: filtered.length,\n        data: movies\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(Movies, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var genres = [{\n        _id: '',\n        name: 'All Genres'\n      }].concat(_toConsumableArray(getGenres())); // // //nemishod faghat name bezarim?\n\n      this.setState({\n        movies: getMovies(),\n        genres: genres\n      }); //bayad id dashte bashe chon dar list baraye har kodom az lista id tarif kardim pas barash ye id khali mizarim vagarna error mide\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var count = this.state.movies.length; //length = this.state.movies.length\n\n      var _this$state2 = this.state,\n          pageSize = _this$state2.pageSize,\n          currentPage = _this$state2.currentPage,\n          sortColumn = _this$state2.sortColumn;\n      if (count === 0) return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"There is no movies in the database.\");\n\n      var _this$getPageData = this.getPageData(),\n          totalCount = _this$getPageData.totalCount,\n          movies = _this$getPageData.data;\n\n      return React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(ListGroup, {\n        items: this.state.genres,\n        selectedItem: this.state.selectedGenre //yani genre ke roosh click shode beshe selctedGenremon va state bar asaseh taghir kone\n        ,\n        onItemSelect: this.handleGenreSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })), React.createElement(Link, {\n        to: \"./movies/new\",\n        className: \"btn btn-primary\",\n        style: {\n          marginbottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Showing \", totalCount, \" movies in the database.\"), React.createElement(MoviesTable, {\n        movies: movies,\n        sortColumn: sortColumn,\n        onDelete: this.handleDelete,\n        onSort: this.handleSort,\n        onLike: this.handleLike,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(Pagination, {\n        itemsCount: totalCount //tedade filma\n        ,\n        pageSize: pageSize,\n        currentPage: currentPage,\n        onPageChange: this.handlePageChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Movies;\n}(Component);\n\nexport default Movies;","map":{"version":3,"sources":["/Users/melodyvsl/Documents/GitHub/movie_react_app/src/component/movies.jsx"],"names":["React","Component","Pagination","MoviesTable","Link","ListGroup","getGenres","paginate","getMovies","_","Movies","state","movies","genres","currentPage","pageSize","sortColumn","path","order","handleDelete","movie","filter","m","_id","setState","handleLike","index","indexOf","liked","handlePageChange","page","handleGenreSelect","genre","selectedGenre","handleSort","getPageData","allMovies","filtered","sorted","orderBy","totalCount","length","data","name","count","marginbottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Pagination from './common/pagination';\nimport MoviesTable from './moviesTable';\nimport { Link } from 'react-router-dom';\nimport ListGroup from './common/listGroup';\nimport { getGenres } from '../servises/fakeGenreService';\nimport { paginate } from '../utils/paginate';\nimport { getMovies } from '../servises/fakeMovieService';\nimport _ from 'lodash'; //baraye sorting kardan//library baraye kar ba arayeha\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    genres: [],\n    currentPage: 1,\n    pageSize: 4,\n    sortColumn: { path: 'title', order: 'asc' },\n  };\n\n  componentDidMount() {\n    const genres = [{ _id: '', name: 'All Genres' }, ...getGenres()]; // // //nemishod faghat name bezarim?\n    this.setState({ movies: getMovies(), genres }); //bayad id dashte bashe chon dar list baraye har kodom az lista id tarif kardim pas barash ye id khali mizarim vagarna error mide\n  }\n\n  handleDelete = movie => {\n    const movies = this.state.movies.filter(m => m._id !== movie._id);\n    this.setState({ movies });\n  };\n\n  handleLike = movie => {\n    const movies = [...this.state.movies];\n    const index = movies.indexOf(movie);\n    movies[index] = { ...movies[index] };\n    movies[index].liked = !movies[index].liked;\n    this.setState({ movies });\n  };\n\n  handlePageChange = page => {\n    this.setState({ currentPage: page });\n  };\n\n  handleGenreSelect = genre => {\n    this.setState({ selectedGenre: genre, currentPage: 1 }); //inja baraye inke age allgenre ro bezanim va safehate mokhtalefesho baraye genraye mokhtalef hamsafeye dovom neshon mide ke khalie baraye hamin baraye baghie genra bayad bargardim be safeye aval ta neshon bede 3 ta filmesho\n  };\n\n  handleSort = sortColumn => {\n    this.setState({ sortColumn }); //avalesh faghat in bood  sortColumn: { path, order: 'asc'\n  };\n\n  getPageData = () => {\n    const { pageSize, currentPage, selectedGenre, movies: allMovies, sortColumn } = this.state;\n    const filtered =\n      selectedGenre && selectedGenre._id // inja ino neveshtim chon baraye allgenre id nadarim pas inja tarifesh kardim ke age id ha ham barabar nabod all movie ro be ma bede...age barabar bod filter kone\n        ? allMovies.filter(m => m.genre._id == selectedGenre._id)\n        : allMovies; // if selectedItem truthy filter kon oon filmai ke idishon ba idie selected item yekie dar gheyre in sorat kole fimlaro neshon bede\n\n    const sorted = _.orderBy(filtered, [sortColumn.path], [sortColumn.order]); //mige filtero begir bar asase titlesh ke dar path tarif shode be shekle asc orderesh kon\n\n    const movies = paginate(sorted, currentPage, pageSize); // inja ham ye arraye jadid sakhtim ke etelaatesh paginate shode beshe va az fni ke dar paginate.js hast estefade kardim barash va dar bakhshaye dge ham in movies ro be onvane array estefade kardim\n    return { totalCount: filtered.length, data: movies };\n  };\n\n  render() {\n    const { length: count } = this.state.movies; //length = this.state.movies.length\n\n    const { pageSize, currentPage, sortColumn } = this.state;\n\n    if (count === 0) return <p>There is no movies in the database.</p>;\n    const { totalCount, data: movies } = this.getPageData();\n    return (\n      <div className=\"row\">\n        <div className=\"col-3\">\n          <ListGroup\n            items={this.state.genres}\n            selectedItem={this.state.selectedGenre} //yani genre ke roosh click shode beshe selctedGenremon va state bar asaseh taghir kone\n            onItemSelect={this.handleGenreSelect}\n          />\n        </div>\n        <Link to=\"./movies/new\" className=\"btn btn-primary\" style={{ marginbottom: 20 }} />\n\n        <div className=\"col\">\n          <p>Showing {totalCount} movies in the database.</p>\n          <MoviesTable\n            movies={movies}\n            sortColumn={sortColumn}\n            onDelete={this.handleDelete}\n            onSort={this.handleSort}\n            onLike={this.handleLike}\n          />\n          <Pagination\n            itemsCount={totalCount} //tedade filma\n            pageSize={pageSize}\n            currentPage={currentPage}\n            onPageChange={this.handlePageChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Movies;\n"]},"metadata":{},"sourceType":"module"}