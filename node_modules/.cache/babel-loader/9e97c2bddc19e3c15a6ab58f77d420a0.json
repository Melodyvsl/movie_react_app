{"ast":null,"code":"import _objectSpread from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melodyvsl/Documents/GitHub/movie_react_app/src/component/common/form.jsx\";\nimport React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './input';\nimport Select from './Select';\n\nvar Form =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Form, _Component);\n\n  function Form() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Form)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {},\n      errors: {}\n    };\n\n    _this.validate = function () {\n      var result = Joi.validate(_this.state.data, _this.schema, {\n        abortEarly: false\n      }); //abort ham errore bydefulte khode in librarye ke pakkeshkardim injori\n\n      console.log(result);\n      var errors = {};\n      var data = _this.state.data;\n      if (data.username.trim() === '') errors.username = 'Username is required.'; //inja mige age ke filled khali bood in property be wrror ezafe she\n\n      if (data.password.trim() === '') errors.password = 'Password is required.';\n      return Object.keys(errors).length === 0 ? null : errors; // inja ham property haye error ro migire to ye array gharar mide mige age length 0 bood null return she gheyre in soorat errore marbote\n    };\n\n    _this.validateProperty = function (_ref) {\n      var name = _ref.name,\n          value = _ref.value;\n\n      var obj = _defineProperty({}, name, value);\n\n      var schema = _defineProperty({}, name, _this.schema[name]);\n\n      var _Joi$validate = Joi.validate(obj, schema),\n          error = _Joi$validate.error;\n\n      return error ? error.details[0].message : null; //age error true bood miad payame defulte khode joi ro chap mikone age nabod null mishe\n    };\n\n    _this.handleSubmit = function (e) {\n      //disable sending this post this form to server\n      e.preventDefault(); //validate data and if there is a error, returns it\n\n      var errors = _this.validate();\n\n      console.log(errors);\n\n      _this.setState({\n        errors: errors || {}\n      }); //bade anjame fn validate age tosh chizi bod ke oono namayesh mide ama age nabood jaye null bayad in obj khali gharar begire//errors property age truty bood va daronesh chizi bood ke hich age nabood bayad ye obj khali tosh bashe chonnemitone null bashe va baese ijade error mishe\n\n\n      if (errors) return;\n\n      _this.doSubmit();\n    };\n\n    _this.handleChange = function (_ref2) {\n      var input = _ref2.currentTarget;\n\n      //validate the input field after typing\n      var errors = _objectSpread({}, _this.state.errors); //obj errors ro clone kardim\n\n\n      var errorMessage = _this.validateProperty(input); //mikhaym error zamani namayesh dade she ke darim chizi minevisim fn validate maleo kole safas\n\n\n      if (errorMessage) errors[input.name] = errorMessage; //age errormessage truthy bood dar obj errors esme inpute morede nazar(masalan username) ro gharar bede va ron ro dar errormessage zakhire kon\n      else delete errors[input.name]; //age errori nabod az errors in property pak she\n      //after typing value, change the state\n\n      var data = _objectSpread({}, _this.state.data); //inja bma state ro clone mikonim taghirat ro anjam midim bad react khodesh state aslio avaz mikone\n\n\n      data[input.name] = input.value; //inja ham migim username accounte clone shodaro begir bad valueye current targetemon ro ke input hast ro behesh ekhtesas bede\n\n      _this.setState({\n        data: data,\n        errors: errors\n      }); //new data obj\n\n    };\n\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"renderButton\",\n    //in kar ham baraye ine ke vaghti ye chizi ro too input neveshtim ststae inja update beshe va hamono neshon bede(single source of truth)\n    //inja jaye e mishe kolan currentTarget ro be onvane arg gereft chon az ye property bishtar estefade nakardim az e obj pas khode hamon ro arg migirim\n    value: function renderButton(label) {\n      return React.createElement(\"button\", {\n        disabled: this.validate() //in bayad ya true bashe ya false...in fn ham ya null ro return mikone ya ye obj ba yek ya chandta error ro...age null she ke falsye engar in fn mishe false pas yani error nadarim dokme kar mikone ama age obj bashe obj considered truthy pas ture be hesab miad va disable mishe dokme\n        ,\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, label);\n    }\n  }, {\n    key: \"renderSelect\",\n    value: function renderSelect(name, label, options) {\n      var _this$state = this.state,\n          data = _this$state.data,\n          errors = _this$state.errors;\n      return React.createElement(Select, {\n        name: name,\n        value: data[name],\n        label: label,\n        onChange: this.handleChange,\n        error: errors[name],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"renderInput\",\n    value: function renderInput(name, label) {\n      var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'text';\n      //be type defult dadim ke text bashe ama dar loginform baraye password type ro password gozashtim\n      var _this$state2 = this.state,\n          data = _this$state2.data,\n          errors = _this$state2.errors;\n      return React.createElement(Input, {\n        type: type //noe valui ke toye inputaro namayesh mide\n        ,\n        name: name,\n        value: data[name],\n        label: label,\n        onChange: this.handleChange,\n        error: errors[name],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Form;\n}(Component);\n\nexport default Form;","map":{"version":3,"sources":["/Users/melodyvsl/Documents/GitHub/movie_react_app/src/component/common/form.jsx"],"names":["React","Component","Joi","Input","Select","Form","state","data","errors","validate","result","schema","abortEarly","console","log","username","trim","password","Object","keys","length","validateProperty","name","value","obj","error","details","message","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","input","currentTarget","errorMessage","label","options","type"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './input';\nimport Select from './Select';\n\nclass Form extends Component {\n  state = {\n    data: {},\n    errors: {},\n  };\n\n  validate = () => {\n    const result = Joi.validate(this.state.data, this.schema, { abortEarly: false }); //abort ham errore bydefulte khode in librarye ke pakkeshkardim injori\n    console.log(result);\n\n    const errors = {};\n    const { data } = this.state;\n\n    if (data.username.trim() === '') errors.username = 'Username is required.'; //inja mige age ke filled khali bood in property be wrror ezafe she\n    if (data.password.trim() === '') errors.password = 'Password is required.';\n\n    return Object.keys(errors).length === 0 ? null : errors; // inja ham property haye error ro migire to ye array gharar mide mige age length 0 bood null return she gheyre in soorat errore marbote\n  };\n\n  validateProperty = ({ name, value }) => {\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null; //age error true bood miad payame defulte khode joi ro chap mikone age nabod null mishe\n  };\n\n  handleSubmit = e => {\n    //disable sending this post this form to server\n    e.preventDefault();\n\n    //validate data and if there is a error, returns it\n    const errors = this.validate();\n    console.log(errors);\n    this.setState({ errors: errors || {} }); //bade anjame fn validate age tosh chizi bod ke oono namayesh mide ama age nabood jaye null bayad in obj khali gharar begire//errors property age truty bood va daronesh chizi bood ke hich age nabood bayad ye obj khali tosh bashe chonnemitone null bashe va baese ijade error mishe\n    if (errors) return;\n\n    this.doSubmit();\n  }; //ye event object be onvane argument gereft va ba in fn az reloade kamele page jologiri mikoni//dar vaghe injori az reloade kamele page jologiri mishe\n\n  handleChange = ({ currentTarget: input }) => {\n    //validate the input field after typing\n    const errors = { ...this.state.errors }; //obj errors ro clone kardim\n    const errorMessage = this.validateProperty(input); //mikhaym error zamani namayesh dade she ke darim chizi minevisim fn validate maleo kole safas\n    if (errorMessage) errors[input.name] = errorMessage;\n    //age errormessage truthy bood dar obj errors esme inpute morede nazar(masalan username) ro gharar bede va ron ro dar errormessage zakhire kon\n    else delete errors[input.name]; //age errori nabod az errors in property pak she\n\n    //after typing value, change the state\n    const data = { ...this.state.data }; //inja bma state ro clone mikonim taghirat ro anjam midim bad react khodesh state aslio avaz mikone\n    data[input.name] = input.value; //inja ham migim username accounte clone shodaro begir bad valueye current targetemon ro ke input hast ro behesh ekhtesas bede\n\n    this.setState({ data, errors }); //new data obj\n  }; //in kar ham baraye ine ke vaghti ye chizi ro too input neveshtim ststae inja update beshe va hamono neshon bede(single source of truth)\n  //inja jaye e mishe kolan currentTarget ro be onvane arg gereft chon az ye property bishtar estefade nakardim az e obj pas khode hamon ro arg migirim\n\n  renderButton(label) {\n    return (\n      <button\n        disabled={this.validate()} //in bayad ya true bashe ya false...in fn ham ya null ro return mikone ya ye obj ba yek ya chandta error ro...age null she ke falsye engar in fn mishe false pas yani error nadarim dokme kar mikone ama age obj bashe obj considered truthy pas ture be hesab miad va disable mishe dokme\n        className=\"btn btn-primary\"\n      >\n        {label}\n      </button>\n    );\n  }\n\n  renderSelect(name, label, options) {\n    const { data, errors } = this.state;\n    return (\n      <Select\n        name={name}\n        value={data[name]}\n        label={label}\n        onChange={this.handleChange}\n        error={errors[name]}\n      />\n    );\n  }\n  renderInput(name, label, type = 'text') {\n    //be type defult dadim ke text bashe ama dar loginform baraye password type ro password gozashtim\n    const { data, errors } = this.state;\n    return (\n      <Input\n        type={type} //noe valui ke toye inputaro namayesh mide\n        name={name}\n        value={data[name]}\n        label={label}\n        onChange={this.handleChange}\n        error={errors[name]}\n      />\n    );\n  }\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}