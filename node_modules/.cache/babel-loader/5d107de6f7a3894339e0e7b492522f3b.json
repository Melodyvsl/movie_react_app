{"ast":null,"code":"import _objectSpread from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melodyvsl/Documents/GitHub/movie_react_app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melodyvsl/Documents/GitHub/movie_react_app/src/component/loginForm.jsx\";\nimport React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './common/input';\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginForm, _Component);\n\n  function LoginForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoginForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {\n        username: '',\n        password: ''\n      },\n      errors: {} //inja obj estefade mikonim chon seda kardanesh asoontar az array hast ba [' '] mishe sedash kard ama array ro bayad ba find peyda kard\n\n    };\n    _this.schema = {\n      username: Joi.string().required(),\n      password: Joi.string().required()\n    };\n\n    _this.validate = function () {\n      var result = Joi.validate(_this.state.data, _this.schema, {\n        abortEarly: false\n      }); //abort ham errore bydefulte khode in librarye ke pakkeshkardim injori\n\n      console.log(result);\n      var errors = {};\n      var data = _this.state.data;\n      if (data.username.trim() === '') errors.username = 'Username is required.'; //inja mige age ke filled khali bood in property be wrror ezafe she\n\n      if (data.password.trim() === '') errors.password = 'Password is required.';\n      return Object.keys(errors).length === 0 ? null : errors; // inja ham property haye error ro migire to ye array gharar mide mige age length 0 bood null return she gheyre in soorat errore marbote\n    };\n\n    _this.handleSubmit = function (e) {\n      //disable sending this post this form to server\n      e.preventDefault(); //validate data and if there is a error, returns it\n\n      var errors = _this.validate();\n\n      console.log(errors);\n\n      _this.setState({\n        errors: errors || {}\n      }); //bade anjame fn validate age tosh chizi bod ke oono namayesh mide ama age nabood jaye null bayad in obj khali gharar begire//errors property age truty bood va daronesh chizi bood ke hich age nabood bayad ye obj khali tosh bashe chonnemitone null bashe va baese ijade error mishe\n\n\n      if (errors) return; //call the server\n\n      console.log('submitted');\n    };\n\n    _this.validateProperty = function (_ref) {\n      var name = _ref.name,\n          value = _ref.value;\n\n      var obj = _defineProperty({}, name, value);\n\n      var schema = _defineProperty({}, name, _this.schema[name]);\n\n      var _Joi$validate = Joi.validate(obj, schema),\n          error = _Joi$validate.error;\n\n      return error ? error.details[0].message : null; //age error true bood miad payame defulte khode joi ro chap mikone age nabod null mishe\n    };\n\n    _this.handleChange = function (_ref2) {\n      var input = _ref2.currentTarget;\n\n      //validate the input field after typing\n      var errors = _objectSpread({}, _this.state.errors); //obj errors ro clone kardim\n\n\n      var errorMessage = _this.validateProperty(input); //mikhaym error zamani namayesh dade she ke darim chizi minevisim fn validate maleo kole safas\n\n\n      if (errorMessage) errors[input.name] = errorMessage; //age errormessage truthy bood dar obj errors esme inpute morede nazar(masalan username) ro gharar bede va ron ro dar errormessage zakhire kon\n      else delete errors[input.name]; //age errori nabod az errors in property pak she\n      //after typing value, change the state\n\n      var data = _objectSpread({}, _this.state.data); //inja bma state ro clone mikonim taghirat ro anjam midim bad react khodesh state aslio avaz mikone\n\n\n      data[input.name] = input.value; //inja ham migim username accounte clone shodaro begir bad valueye current targetemon ro ke input hast ro behesh ekhtesas bede\n\n      _this.setState({\n        data: data,\n        errors: errors\n      }); //new data obj\n\n    };\n\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"render\",\n    //in kar ham baraye ine ke vaghti ye chizi ro too input neveshtim ststae inja update beshe va hamono neshon bede(single source of truth)\n    //inja jaye e mishe kolan currentTarget ro be onvane arg gereft chon az ye property bishtar estefade nakardim az e obj pas khode hamon ro arg migirim\n    value: function render() {\n      var _this$state = this.state,\n          data = _this$state.data,\n          errors = _this$state.errors;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Input, {\n        name: \"username\",\n        value: data.username,\n        label: \"Username\",\n        onChange: this.handleChange,\n        error: errors.username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(Input, {\n        name: \"password\",\n        value: data.password,\n        label: \"Password\",\n        onChange: this.handleChange,\n        error: errors.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        disabled: this.validate() //in bayad ya true bashe ya false...in fn ham ya null ro return mikone ya ye obj ba yek ya chandta error ro...age null she ke falsye engar in fn mishe false pas yani error nadarim dokme kar mikone ama age obj bashe obj considered truthy pas ture be hesab miad va disable mishe dokme\n        ,\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Login\")));\n    }\n  }]);\n\n  return LoginForm;\n}(Component);\n\nexport default LoginForm; //value darone input baes shod ke dge inpute ma state khodesho ro nadashte bashe va connect she be stati ke inja darim","map":{"version":3,"sources":["/Users/melodyvsl/Documents/GitHub/movie_react_app/src/component/loginForm.jsx"],"names":["React","Component","Joi","Input","LoginForm","state","data","username","password","errors","schema","string","required","validate","result","abortEarly","console","log","trim","Object","keys","length","handleSubmit","e","preventDefault","setState","validateProperty","name","value","obj","error","details","message","handleChange","input","currentTarget","errorMessage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport Input from './common/input';\n\nclass LoginForm extends Component {\n  state = {\n    data: { username: '', password: '' },\n    errors: {}, //inja obj estefade mikonim chon seda kardanesh asoontar az array hast ba [' '] mishe sedash kard ama array ro bayad ba find peyda kard\n  };\n\n  schema = {\n    username: Joi.string().required(),\n    password: Joi.string().required(),\n  }; //joze library joi hast ke tarif mikonim har property bayad chi bashe\n\n  validate = () => {\n    const result = Joi.validate(this.state.data, this.schema, { abortEarly: false }); //abort ham errore bydefulte khode in librarye ke pakkeshkardim injori\n    console.log(result);\n\n    const errors = {};\n    const { data } = this.state;\n\n    if (data.username.trim() === '') errors.username = 'Username is required.'; //inja mige age ke filled khali bood in property be wrror ezafe she\n    if (data.password.trim() === '') errors.password = 'Password is required.';\n\n    return Object.keys(errors).length === 0 ? null : errors; // inja ham property haye error ro migire to ye array gharar mide mige age length 0 bood null return she gheyre in soorat errore marbote\n  };\n\n  handleSubmit = e => {\n    //disable sending this post this form to server\n    e.preventDefault();\n\n    //validate data and if there is a error, returns it\n    const errors = this.validate();\n    console.log(errors);\n    this.setState({ errors: errors || {} }); //bade anjame fn validate age tosh chizi bod ke oono namayesh mide ama age nabood jaye null bayad in obj khali gharar begire//errors property age truty bood va daronesh chizi bood ke hich age nabood bayad ye obj khali tosh bashe chonnemitone null bashe va baese ijade error mishe\n    if (errors) return;\n\n    //call the server\n    console.log('submitted');\n  }; //ye event object be onvane argument gereft va ba in fn az reloade kamele page jologiri mikoni//dar vaghe injori az reloade kamele page jologiri mishe\n\n  validateProperty = ({ name, value }) => {\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null; //age error true bood miad payame defulte khode joi ro chap mikone age nabod null mishe\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    //validate the input field after typing\n    const errors = { ...this.state.errors }; //obj errors ro clone kardim\n    const errorMessage = this.validateProperty(input); //mikhaym error zamani namayesh dade she ke darim chizi minevisim fn validate maleo kole safas\n    if (errorMessage) errors[input.name] = errorMessage;\n    //age errormessage truthy bood dar obj errors esme inpute morede nazar(masalan username) ro gharar bede va ron ro dar errormessage zakhire kon\n    else delete errors[input.name]; //age errori nabod az errors in property pak she\n\n    //after typing value, change the state\n    const data = { ...this.state.data }; //inja bma state ro clone mikonim taghirat ro anjam midim bad react khodesh state aslio avaz mikone\n    data[input.name] = input.value; //inja ham migim username accounte clone shodaro begir bad valueye current targetemon ro ke input hast ro behesh ekhtesas bede\n\n    this.setState({ data, errors }); //new data obj\n  }; //in kar ham baraye ine ke vaghti ye chizi ro too input neveshtim ststae inja update beshe va hamono neshon bede(single source of truth)\n  //inja jaye e mishe kolan currentTarget ro be onvane arg gereft chon az ye property bishtar estefade nakardim az e obj pas khode hamon ro arg migirim\n\n  render() {\n    const { data, errors } = this.state;\n    return (\n      <div>\n        <h1>Login</h1>\n        <form onSubmit={this.handleSubmit}>\n          <Input\n            name=\"username\"\n            value={data.username}\n            label=\"Username\"\n            onChange={this.handleChange}\n            error={errors.username}\n          />\n          <Input\n            name=\"password\"\n            value={data.password}\n            label=\"Password\"\n            onChange={this.handleChange}\n            error={errors.password}\n          />\n\n          <button\n            disabled={this.validate()} //in bayad ya true bashe ya false...in fn ham ya null ro return mikone ya ye obj ba yek ya chandta error ro...age null she ke falsye engar in fn mishe false pas yani error nadarim dokme kar mikone ama age obj bashe obj considered truthy pas ture be hesab miad va disable mishe dokme\n            className=\"btn btn-primary\"\n          >\n            Login\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n\n//value darone input baes shod ke dge inpute ma state khodesho ro nadashte bashe va connect she be stati ke inja darim\n"]},"metadata":{},"sourceType":"module"}