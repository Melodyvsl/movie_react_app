{"ast":null,"code":"import _toConsumableArray from \"/Users/melodyvsl/Desktop/vidly/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/melodyvsl/Desktop/vidly/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melodyvsl/Desktop/vidly/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melodyvsl/Desktop/vidly/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melodyvsl/Desktop/vidly/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melodyvsl/Desktop/vidly/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melodyvsl/Desktop/vidly/src/component/movies.jsx\";\nimport React, { Component } from 'react';\nimport Pagination from './common/pagination';\nimport ListGroup from './common/listGroup';\nimport { getGenres } from '../servises/fakeGenreService';\nimport { paginate } from '../utils/paginate';\nimport { getMovies } from '../servises/fakeMovieService';\n\nvar Movies =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Movies, _Component);\n\n  function Movies() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Movies);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Movies)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      genres: [],\n      currentPage: 1,\n      pageSize: 4\n    };\n\n    _this.handleDelete = function (movie) {\n      var movies = _this.state.movies.filter(function (m) {\n        return m._id !== movie._id;\n      });\n\n      _this.setState({\n        movies: movies\n      });\n    };\n\n    _this.handlePageChange = function (page) {\n      _this.setState({\n        currentPage: page\n      });\n    };\n\n    _this.handleGenreSelect = function (genre) {\n      _this.setState({\n        selectedGenre: genre\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Movies, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var genres = [{\n        name: 'All Genres'\n      }].concat(_toConsumableArray(getGenres())); // nemishod faghat name bezarim?\n\n      this.setState({\n        movies: getMovies(),\n        genres: genres\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var count = this.state.movies.length; //length = this.state.movies.length\n\n      var _this$state = this.state,\n          pageSize = _this$state.pageSize,\n          currentPage = _this$state.currentPage,\n          selectedGenre = _this$state.selectedGenre,\n          allMovies = _this$state.movies;\n      if (count === 0) return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, \"There is no movies in the database.\");\n      var filtered = selectedGenre && selectedGenre._id ? allMovies.filter(function (m) {\n        return m.genre._id == selectedGenre._id;\n      }) : allMovies; // if selectedItem truthy filter kon oon filmai ke idishon ba idie selected item yekie dar gheyre in sorat kole fimlaro neshon bede\n\n      var movies = paginate(filtered, currentPage, pageSize); // inja ham ye arraye jadid sakhtim ke etelaatesh paginate shode beshe va az fni ke dar paginate.js hast estefade kardim barash va dar bakhshaye dge ham in movies ro be onvane array estefade kardim\n\n      return React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(ListGroup, {\n        items: this.state.genres,\n        selectedItem: this.state.selectedGenre,\n        onItemSelect: this.handleGenreSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Showing \", filtered.length, \" movies in the database.\"), React.createElement(\"table\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Title\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Genre\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Stock\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"Rate\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, movies.map(function (movie) {\n        return React.createElement(\"tr\", {\n          key: movie._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, movie.title), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, movie.genre.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, movie.numberInStock), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, movie.dailyRentalRate), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this2.handleDelete(movie);\n          },\n          className: \"btn btn-danger btn-sm\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, \"Delete\")));\n      }))), React.createElement(Pagination, {\n        itemsCount: filtered.length,\n        pageSize: pageSize,\n        currentPage: currentPage,\n        onPageChange: this.handlePageChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Movies;\n}(Component);\n\nexport default Movies;","map":{"version":3,"sources":["/Users/melodyvsl/Desktop/vidly/src/component/movies.jsx"],"names":["React","Component","Pagination","ListGroup","getGenres","paginate","getMovies","Movies","state","movies","genres","currentPage","pageSize","handleDelete","movie","filter","m","_id","setState","handlePageChange","page","handleGenreSelect","genre","selectedGenre","name","count","length","allMovies","filtered","map","title","numberInStock","dailyRentalRate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Pagination from './common/pagination';\nimport ListGroup from './common/listGroup';\nimport { getGenres } from '../servises/fakeGenreService';\nimport { paginate } from '../utils/paginate';\nimport { getMovies } from '../servises/fakeMovieService';\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    genres: [],\n    currentPage: 1,\n    pageSize: 4,\n  };\n\n  componentDidMount() {\n    const genres = [{ name: 'All Genres' }, ...getGenres()]; // nemishod faghat name bezarim?\n    this.setState({ movies: getMovies(), genres });\n  }\n\n  handleDelete = movie => {\n    const movies = this.state.movies.filter(m => m._id !== movie._id);\n    this.setState({ movies });\n  };\n\n  handlePageChange = page => {\n    this.setState({ currentPage: page });\n  };\n\n  handleGenreSelect = genre => {\n    this.setState({ selectedGenre: genre });\n  };\n\n  render() {\n    const { length: count } = this.state.movies; //length = this.state.movies.length\n    const { pageSize, currentPage, selectedGenre, movies: allMovies } = this.state;\n\n    if (count === 0) return <p>There is no movies in the database.</p>;\n    const filtered =\n      selectedGenre && selectedGenre._id\n        ? allMovies.filter(m => m.genre._id == selectedGenre._id)\n        : allMovies; // if selectedItem truthy filter kon oon filmai ke idishon ba idie selected item yekie dar gheyre in sorat kole fimlaro neshon bede\n    const movies = paginate(filtered, currentPage, pageSize); // inja ham ye arraye jadid sakhtim ke etelaatesh paginate shode beshe va az fni ke dar paginate.js hast estefade kardim barash va dar bakhshaye dge ham in movies ro be onvane array estefade kardim\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-3\">\n          <ListGroup\n            items={this.state.genres}\n            selectedItem={this.state.selectedGenre}\n            onItemSelect={this.handleGenreSelect}\n          />\n        </div>\n        <div className=\"col\">\n          <p>Showing {filtered.length} movies in the database.</p>\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Title</th>\n                <th>Genre</th>\n                <th>Stock</th>\n                <th>Rate</th>\n                <th />\n              </tr>\n            </thead>\n            <tbody>\n              {movies.map(movie => (\n                <tr key={movie._id}>\n                  <td>{movie.title}</td>\n                  <td>{movie.genre.name}</td>\n                  <td>{movie.numberInStock}</td>\n                  <td>{movie.dailyRentalRate}</td>\n                  <td>\n                    <button\n                      onClick={() => this.handleDelete(movie)}\n                      className=\"btn btn-danger btn-sm\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          <Pagination\n            itemsCount={filtered.length}\n            pageSize={pageSize}\n            currentPage={currentPage}\n            onPageChange={this.handlePageChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Movies;\n"]},"metadata":{},"sourceType":"module"}